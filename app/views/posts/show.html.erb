<div class="postMain postConstraint"> 
  <h1 class="postTitle"><%= @post.title %></h1>
  <div class="postActionLinks">
    <% if current_user == @post.user %>
      <%= link_to '<span class="actionIcon edit"></span> Edit Post'.html_safe, edit_post_path(@post), class: 'actionLink' %>
      <%= link_to '<span class="actionIcon delete"></span> Delete Post'.html_safe, @post, method: :delete, confirm: "Are you sure you want to delete this post?", class: 'actionLink deleteLink' %>
    <% else %>
      <%= link_to '<span class="actionIcon pin"></span> Pin Post'.html_safe, '', class: 'actionLink'+login_popup_class %>
      <%= link_to '<span class="actionIcon report"></span> Report Post'.html_safe, '', class: 'actionLink reportLink'+login_popup_class %>
    <% end %>
  </div>
  <div class="postContent"><%= @post.description? ? markdown(@post.description) : "<span class='placeholder'>No desciption</span>".html_safe %></div>
  <div class="postBottom">
    <div class="postTags">
      <%= render(partial: 'tags/tag', collection: @post.tags) || "This post has no tags." %>
    </div>
    <div class="postRep">
      <%= voting_link(1.0, @post, @user_vote) %>
      <p id="repCount"><%= post_reputation(@votes) %></p>
      <%= voting_link(-1.0, @post, @user_vote) %>
    </div>
  </div>

  <div class="postUser">
    <%= link_to image_tag('default_user.png', class: 'userImage'), @post.user %>
    <span class="postUsername"><%= link_to @post.user.username %></span>
  </div>
</div>
<hr class="dottedDivider" />

<% if current_user %>
  <div id="commentForm" class="postConstraint form">
    <%= render 'comments/comment_form' %>
  </div>
<% end %>

<hr class="dottedDivider" />

<div id="commentList" rel="<%= post_comments_path(@post) %>"><!-- AJAX render --></div>
<%= javascript_include_tag params[:controller] %>
<script>loadPostComments()</script>
